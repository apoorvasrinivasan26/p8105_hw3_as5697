P8105\_hw3\_as5697
================
Apoorva Srinivasan
10/14/2018

Problem 1
=========

### 1.1

``` r
data(brfss_smart2010)
```

``` r
brfss = brfss_smart2010 %>% 
  janitor::clean_names() %>%
  filter(topic == "Overall Health") %>%
  filter(response %in% c("Excellent", "Very good", "Good", "Fair", "Poor")) %>% 
  rename(state = locationabbr, county = locationdesc) %>%
  mutate(response = as.factor(response)) %>% 
  mutate(
    response = fct_relevel(response, c("Excellent", "Very good", "Good", "Fair", "Poor"))
    )
```

### 1.2

In 2002, which states were observed at 7 locations?

``` r
brfss %>% 
  filter(year == 2002) %>% 
  group_by(state) %>% 
  summarize(n_locations = n_distinct(county)) %>% 
  filter(n_locations == 7) %>%
  head()
## # A tibble: 3 x 2
##   state n_locations
##   <chr>       <int>
## 1 CT              7
## 2 FL              7
## 3 NC              7
```

### 1.3

Make a “spaghetti plot” that shows the number of locations in each state from 2002 to 2010.

``` r
brfss %>%
  group_by(year, state) %>%
  summarize(num_locations = n()) %>%
  ggplot(aes(x = year, y = num_locations, color = state)) + 
  labs(
    title = "Spaghetti plot of number of locations in each state from 2002 to 2010",
    x = "Year",
    y = "Number of locations") +
  geom_line() + 
  theme(legend.position = "right") +
  scale_color_viridis(discrete = TRUE) 
```

<img src="p8105_hw3_as5697_files/figure-markdown_github/p1.3-1.png" width="90%" />

### 1.4

Make a table showing, for the years 2002, 2006, and 2010, the mean and standard deviation of the proportion of “Excellent” responses across locations in NY State.

``` r
brfss %>%
  spread(key = response, value = data_value) %>%
  janitor::clean_names() %>%
  filter(year == "2002" | year == "2006" | year == "2010") %>% 
  group_by(year, state) %>%
  summarize(excellent_mean = mean(excellent, na.rm = TRUE), 
            excellent_SD = sd(excellent, na.rm = TRUE)) %>%
  filter(state == "NY") %>%
  knitr::kable(digits = 1)
```

|  year| state |  excellent\_mean|  excellent\_SD|
|-----:|:------|----------------:|--------------:|
|  2002| NY    |             24.0|            4.5|
|  2006| NY    |             22.5|            4.0|
|  2010| NY    |             22.7|            3.6|

### 1.5

``` r
brfss %>% 
  group_by(year, state, response) %>% 
  summarize(average = mean(data_value, na.rm = TRUE)) %>% 
  ggplot(aes(x = year, y = average, group = year, color = response)) + 
  geom_boxplot() + 
  facet_grid(~ response) +
  labs(title = "Distribution of State Level Averages Over Time", x = "Year", y = "Mean Proportions") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1))
```

<img src="p8105_hw3_as5697_files/figure-markdown_github/p1.5-1.png" width="90%" />
